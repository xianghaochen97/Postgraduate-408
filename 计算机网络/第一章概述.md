# 第一章 概述

## 概述

### 功能
- 数据通信
- 资源共享
- 分布式处理
- 提高可靠性
- 负载均衡


### 发展阶段  记记就好了
- 第一阶段
ARPAnet  ->  + TCP/IP + internet(实现不同类型网络互联) -> Internet
网络连接计算机
互联网连接网络  

- 第二阶段  这个阶段后期将控制权交给私人公司
三级结构
校园网/企业网 -> 地区网 -> 主干网

- 多层次ISP结构  (internet service provider)
也是和第二阶段的三层结构类似，分为多层ISP，给ISP付钱获取服务，ip等资源是掌握在他们手里的
IXP 因特网交换点 允许同级地区网络直接相连






### 组成
1.组成部分：硬件、软件、协议
2.**工作方式**：

	- 边缘部分   **端系统通信是端系统的进程之间通信**（C/S，B/S一样的模式只是请求端不同 ，P2P peer-to-peer 对等连接）  
	- 核心部分 为边缘部分服务   就像小区里的中央公园      

3.功能组成:	

	- 数据通信  -> **通信子网**（传输 交换 控制 存储）  osi七层模型中的下三层：物理层、数据链路层、网络层
	- 资源共享  —> **资源子网**（资源共享设备软件集合，数据封装处理） 	osi上三层   传输层将下三层服务提供上三层，屏蔽一些细节  就像功能封装  干杂活 怎么干不需要上层知道


### 分类
- 按分布范围
- 按使用者
- 按交换技术
- 按拓扑结构 节点 通信链路 组合成几何结构
- 按传输技术

传输和交换的概念     传输技术的分类涉及使用了何种交换技术来区分 



### 标准化
标准、相关机构


### 性能指标
速率、带宽、吞吐量  

时延、时延带宽积、往返RTT  

发送~传输的概念，传播是另一种概念，描述在链路上传送

#### 速率
数据传输率/比特率   从发送端到接收端
bit
单位 b/s kb/s Mb/s Gb/s   10<sup>3</sup>换算     

存储容量相关  一般以字节为最小单位  1Byte=8bit   2<sup>10</sup>换算

#### 带宽
频带宽度   最高频率与最低频率的差
现在一般指通信线路传送数据的能力    最高数据率
在传输线路入口处**发送**信号的速率，不是在线路上传输的速率

#### 吞吐量
单位时间内通过某个网络的**数据量**
受带宽或网络的额定速率影响    实际传输速率  
所有信道单位时间内可以通过多少比特，也是表示速度，不是表示量

带宽-最高数据率：如100Mb/s 
吞吐量-**各链路实际传输数据率和**：30Mb/s

#### 时延 
延迟/迟延
数据从链路的一端到另一端的时间

发送时延（传输时延）：把自己的数据全扔到信道上的时间  数据长度/信道带宽（发送速率，实际达不到带宽）   ——去机场从家里出来的准备时间
传播时延：主机到路由器信道上所花的时间，多段    信道长度/电磁波在信道上的传输速率  ——路上花的时间
排队时延：路由器上等待**输出/输入**链路可用时间   ——机场排队等待安检、等待登机等所消耗的时间
处理时延：路由器上检错、找出口      ——机场安检、登机等所消耗的时间  

高速链路是发送速率提高，带宽提高，优化了发送时延，不是影响传播速率，介质一般是不变的

#### 时延带宽积（以比特位单位的链路长度）
时延带宽积 = 传播时延 * 带宽   s * b/s = bit  描述数据量的一个属性  
类似于长度 * 横截面 得到体积  
有意思的是他想的是在信道上是单个比特在一个个进入信道，A端和B端，第一个比特花了传播时延t从A到了B的时候，信道上存在的比特（数据量），就是时延带宽积。其实就是在当前传播时延下，主机能丢多少数据到信道上。也就是以链路上的比特来衡量长度。

#### 往返时延RTT
从发送方发送数据开始（从第一个比特开始，收到第一个返回结束，不用管后续数据的发送时延，就当作只有一个比特），到发送方收到接收方的确认的总时延  
ping一下就能看到
RTT越大，在收到确认之前，可以发送的数据越多  
**往返传播时延 = 传播时延 * 2 ** 
末端处理时间（接收方处理等耗时）
不包括传输时延

#### 利用率
**信道利用率**：有多少时间是有数据的    有数据通过的时间/总时间
网络利用率：所有信道利用率的加权平均值  
利用率增大到某种程度，时延也急剧增大。  跟车道堵车同样的道理







## 体系结构&参考模型 

### 为什么分层
从功能上描述网络结构，计算机网络体系结构是计算机网络的**各层及其协议**的集合  
结构分层是为了将大量的问题分开处理，在通信过程中会遇到的问题很多。  
分层结构的传输就像一个打包快递、物理运输、快递拆包的过程。

### 怎么分层

#### 1 主要元素
实体——每一层的活动元素   <u>对等实体</u>  
协议【水平】——某一层的一系列规则约定    存在与水平对等实体之间，三要素：语法（格式，如何封装拆解）、语义（功能表述，表意）、同步（操作顺序）  
接口（访问服务点SAP）——同向两层之间的连接,上层使用下层服务的入口，相邻层之间才有接口  
服务【垂直】——下层为**相邻**上层提供单向的功能调用，在向上层提供服务的时候，还包含下层提供给本层的服务，网络中上层使用下层（下层更接近于底层或者硬件）提供的服务，类比于客户使用快递公司服务   

#### 2 分层原则
1.各层相互独立，每层只实现一种相对独立的功能
2.每层之间的界限清晰，相互交流少，接口说明清晰
3.结构上分割开，每层用的技术互不干扰，只管自己进行实现技术选型
4.上层**单向**使用下层提供的服务
5.有利于标准化

#### 3 数据关系： PCI + SDU = PDU
SDU（Service Data Unit）：为完成用户需求功能要传送的数据 （往下层走会变大，上一层的PCI会包含进来，就是上一层的PDU）  
PCI（Protocol Control Information）：协议控制信息，控制协议操作的信息  
PDU（Protocol Data Unit）：协议数据单元，对等层次之间的传送的数据单位  

>7层OSI参考模型（法定标准） & 4层TCP/IP参考模型（事实标准） ——> 5层学习模型结构

### OSI参考模型

> 由来-模型结构-通信过程-各层功能与协议

来源：1984年ISO提出的 open system interconnected
七层结构：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层

中间系统最多不超过三层网络层。 端系统的上四层看起来像是直接连在一起了  

上四层 端到端通信  
下三层 点到点通信 只管链路中的下一个节点  

通信过程：
- 传输过程中 前几层在往下传的时候都会加上首部信息（head），成为下一层的PDU
- 且数据链路层还会加上尾部（tail）
- 物理层不会再做其他的处理，而是形成比特流序列


#### 应用层
用户与网络的界面，所有能和用户交互产生网络流量的程序  
文件传输（FTP）、电子邮件（SMTP）、WWW（HTTP）

#### 表示层
用于处理在通信系统中交换信息的表示方式（语法、语义）  
功能：
- 数据格式变换
- 数据加密和解密
- 数据压缩及恢复

#### 会话层
向表示层实体/用户进程提供①建立连接并在连接上②有序的③传输数据
也是建立同步（SYN）  
- 建立、管理、终止会话，相互之间互不影响
- 使用校验点在通信失效之后可以继续恢复通信，数据同步   类似断点续传

#### 传输层
负责主机中两个进程的通信，即**端到端的通信**（这是一个概念，运行在不同主机中的两个进程之间通信，用端口号标识，所以叫端到端），传输单位是报文段（上层传下来的报文分段）或者用户数据报  
功能：
- 可靠传输（确认重试机制）、不可靠传输（不需要建立连接，不管是否丢失，不确认，特别小的数据包）
- 差错控制
- 流量控制(控制发送方的速度和接收方速度匹配， 限制发送端的速度)
- 复用分用 复用：多个应用层进程同时使用下面运输层的服务 分用：运输层把收到的信息分别交给应用层相对应的进程  （快递多客户一个快递员）  根据端口号，传输的时候携带了端口号，不同主机比如都是qq如果端口号不同该怎么找到对应进程呢？

TCP、UDP协议


#### *网络层（IP层、网际层）
把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务，传输单位是数据报/分组。
分组：数据报过长切割之后为分组

- 路由选择 （选择合适的路由,链路上的最佳路径）
- 流量控制 （协调发送端和接收端的速度， 限制发送端的速度）
- 差错控制 （约定校验规则，检查分组是否有错误，纠错或者抛弃）
- 拥塞控制 （针对网络上整体的速度把控。所有节点）

IP,ICMP,IGMP,ARP,RARP协议

#### 数据链路层
将网路层传下来的数据报组装成帧，传输单位是帧

- 成帧（定义帧的开始和结束，在接收端提取数据部分）
- 差错控制（帧错、位错）  可以检错纠错
- 流量控制
- 访问（接入）控制 （控制对信道的访问）  广播式网络中，控制共享信道的占用  介质访问控制子层

SDLC,HDLC,PPP,STP

#### 物理层
在物理媒体（介质）上实现比特流的透明传输，传输单位是比特  
透明传输：不管数据是什么样的

- 定义接口特性（插头、引脚、引脚如何连接）
- 定义传输模式（单工：单方向，一人传输且固定发送和接收方、半双工：发送接收方不固定，但同时只能一个发送、双工：双向，同时）
- 定义传输速率
- 比特同步
- 比特编码（编码电压规定）

Rj45,802.3



### TCP/IP模型
现有协议栈（一系列实际使用的协议），后分层位四层参考模型  
网络接口层（物理+数据链路，主机必须通过某些协议与网络进行连接，并未明确指出这一层级概念）、网际层、传输层、应用层（会话、表示、应用）

#### 协议栈
![TCP/IP协议栈](https://images0.cnblogs.com/blog/468825/201403/051537291593615.png)

比较常用的有TCP和IP协议，以此得名

#### 与OSI的相同和不同
相同：
- 都分层
- 都基于独立的协议栈的概念
- 可以实现异构网络的互联（不同厂家的不同设备）  

不同：
- OSI定义了服务、协议、接口
- OSI模型先于协议，TCP/IP协议先于模型
- TCP/IP在设计的时候就考虑异构互联的问题，将IP作为重要层次
- 在网络层和传输层的通信方式不同

|        | ISO/OSI参考模型 | TCP/IP模型      |
| ------ | --------------- | --------------- |
| 网络层 | 无连接+面向连接  | 无连接（IP协议）|
| 传输层 | 面向连接        | 无连接+面向连接|

> 面向连接:1、建立连接，发出一个建立连接请求，2、连接成功之后，才开始传输数据，3、当数据传输完毕后，必须释放连接
> 无连接：只进行数据传输

> TCP/IP网络层的IP协议强调面向无连接  
> 传输层主要是实现可靠传输，需要建立连接，所以两个模型都有面向连接



### 五层参考模型
物理层、数据链路层、网络层、传输层（进程间的数据传输）、应用层（支持各种网络应用）
|        | 用途 | 协议      |   传输单位 |
| ------ | --------------- | --------------- |---------------|
| 应用层 | 支持各种网络应用  | FTP,SMTP,HTTP| 报文|
| 传输层 | 进程间的数据传输  | TCP,UDP |报文段|
| 网络层 | 源主机到目的主机的数据分组路由与转发（分组，路由选择，出口转发） | IP,ICMP,OSPF| 数据报/分组|
| 数据链路层 | 把网络层传下来的数据报组装**成帧**  | 以太网，PPP| 帧 |
| 物理层 | 实现比特传输     |   - | 比特|


报文->报文段->数据报/分组


## 总结
